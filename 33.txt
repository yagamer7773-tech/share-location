<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Yishak Esatu - Share Location</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #e0f7fa, #80deea);
    color: #0d47a1;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    text-align: center;
    padding: 20px;
  }
  .container {
    background: white;
    padding: 40px 30px;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    max-width: 450px;
    width: 100%;
  }
  h1 { font-size: 2em; margin-bottom: 10px; }
  h2 { font-size: 1.2em; color: #1565c0; margin-bottom: 20px; }
  img {
    width: 150px; height: 150px; border-radius: 50%;
    border: 3px solid #1565c0; margin-bottom: 20px;
    object-fit: cover; box-shadow: 0 0 15px rgba(0,0,0,0.3);
  }
  button {
    background-color: #1565c0; color: white; border: none;
    padding: 15px 30px; font-size: 1em; border-radius: 10px;
    cursor: pointer; transition: all 0.3s ease; margin-bottom: 20px;
  }
  button:hover { background-color: #0d47a1; transform: scale(1.05); }
  #out { font-size: 1em; line-height: 1.5; }
  a { color: #0d47a1; text-decoration: none; font-weight: bold; }
  a:hover { text-decoration: underline; }
  @media (max-width: 500px) {
    .container { padding: 30px 20px; }
    img { width: 120px; height: 120px; }
  }
</style>
</head>
<body>
<div class="container">
  <h1>üåç Yishak Esatu</h1>
  <img src="https://upload.wikimedia.org/wikipedia/commons/7/73/Lion_waiting_in_Namibia.jpg" alt="Lion Picture">
  <h2>Share your location with me</h2>
  <p id="status">Click the button below to share your location securely.</p>
  <button id="get">üìç Get My Location</button>
  <div id="out"></div>
</div>

<script>
const status = document.getElementById('status');
const out = document.getElementById('out');
document.getElementById('get').onclick = async () => {
  if (!navigator.geolocation) {
    status.textContent = 'Geolocation not supported.';
    return;
  }

  // Ask explicit consent
  if (!confirm('By clicking OK you allow this page to read your location (latitude & longitude) to share with Yishak Esatu.')) {
    status.textContent = 'Consent declined.';
    return;
  }

  status.textContent = 'Requesting location‚Ä¶';
  out.innerHTML = '';

  navigator.geolocation.getCurrentPosition(async (pos) => {
    const lat = pos.coords.latitude.toFixed(6);
    const lon = pos.coords.longitude.toFixed(6);
    const acc = Math.round(pos.coords.accuracy || 0);
    const ts = new Date(pos.timestamp).toLocaleString();
    status.textContent = `Location received (¬±${acc} m) at ${ts}`;

    // Google Maps link
    const gmap = `https://www.google.com/maps?q=${lat},${lon}`;

    // Optional reverse geocode via OpenStreetMap
    let place = '';
    try {
      const r = await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${lat}&lon=${lon}`);
      if (r.ok) {
        const j = await r.json();
        place = j.display_name || '';
      }
    } catch(e) { /* ignore errors */ }

    out.innerHTML = `
      <p>${place ? `<strong>${place}</strong><br>` : ''}Latitude: ${lat}<br>Longitude: ${lon}<br>Accuracy: ¬±${acc} m</p>
      <p><a href="${gmap}" target="_blank" rel="noopener">Open in Google Maps</a></p>
      <p><a href="https://wa.me/?text=${encodeURIComponent('My location: ' + gmap)}" target="_blank" rel="noopener">Send via WhatsApp</a></p>
      <p><a href="sms:?&body=${encodeURIComponent('My location: ' + gmap)}">Send via SMS</a></p>
    `;
  }, (err) => {
    status.textContent = 'Error or permission denied: ' + err.message;
  }, { enableHighAccuracy: true, timeout: 15000 });
};
</script>
</body>
</html>
